#!/bin/bash

set -euo pipefail
. /.functions

ARTIFACT_IDS=(
	org.apache.poi:poi@EXTRACTION_LIB_DIR
	org.apache.poi:poi-ooxml@EXTRACTION_LIB_DIR
	org.apache.poi:poi-ooxml-lite@EXTRACTION_LIB_DIR
	org.apache.poi:poi-scratchpad@EXTRACTION_LIB_DIR
)

set_or_default BASE_DIR "/app"
set_or_default HOME_DIR "${BASE_DIR}/solr"
set_or_default MODULES_DIR "${HOME_DIR}/modules"
set_or_default EXTRACTION_LIB_DIR "${MODULES_DIR}/extraction/lib"

export EXTRACTION_LIB_DIR
export POST_CALL="fix-jar-sum"
exec fix-jars "CVE-2025-31672" "5.4.0" "${ARTIFACT_IDS[@]}"
